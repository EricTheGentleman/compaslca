########################################
# COMPAS-LCA Master Configuration File #
########################################

# === Database Settings ===
database_config:

  # Which database should be used for the material matching & LCA calculation?
  database: "kbob" # ("kbob"/"oekobaudat")


# === Category Inference Settings ===
category_inference_config:

  company: "OpenAI"

  model: "gpt-4o"

  api_key:   # Replace with your actual API key
  
  max_tokens: 2048

  temperature: 0


# === Material Inference Settings ===
material_inference_config:

  company: "OpenAI"
  
  model: "gpt-4o"

  # insert the API key in single quotation marks (')
  api_key:   # Replace with your actual API key
  
  max_tokens: 2048

  temperature: 0


# === Category Prompt Variables ===
category_prompt_variables:

  # Expert Reasoning
  include_expert_reasoning: false #(false/true)

  # Chain of Thought Reasoning
  include_cot: false #(false/true)

  # Specify if the LLM should justify its decision in the output
  decision_justification: false #(false/true)


# === Material Prompt Variables ===
material_prompt_variables:

  # Matching Strictness Phrasing. Specifies how many materials entries the LLM should try to match
  matching_strictness: "Mid" #("Low"/"Mid"/"High")

  # This boolean includes the instruction to prioritize the suistainable materials that would fit the IfcBuildingElement / Target Layer
  prioritize_suistainability: false #(false/true)

  # decide if the density (if available) of a material entry should be included in the LCI database passed to the LLM
  # Can increase token usage, especially for large material lists like in the Oekobaudat!
  include_density: false #(false/true)

  # Expert Reasoning
  include_expert_reasoning: false #(false/true)

  # Chain of Thought Reasoning
  include_cot: false #(false/true)

  # Specify if the LLM should justify its decision in the output
  decision_justification: false #(false/true)





# === Extraction Settings ===
# Depending on the availability of the IFC quantities, the BREP calculation can be disabeled
# It would also mean that any bounding-box, geometric complexity and ratios are not included
# It is recommended to enable the brep calculation, but specify brep calculation timeout for high complexity elements
extraction_config:

  # If the IFC entities should be specified, refer to following YAML config file:
  entity_config_path: config/step_01_data_extraction/extraction_config.yaml

  # Specify maximum elements that should be extracted (null for all elements)
  max_elements: null

  # Calculate BREP related quantities (area, volume) with compas_occ
  brep_enabled: true

  # Specify maximum time (seconds) for BREP processing
  brep_timeout: 30



# === IfcBuilding Element Data Filtering ===
# The software package extracts all "possibly" relevant data from each BIM element.
# In order to minimize tokens & navigate the LLM inference, these data sheets can be altered.
# The settings below allow for filtering the JSON files / IFC data sheets.
filter_config:

  # Only include the psets in the list config/step_01_data_extraction/pset_selection.py (can be altered!)
  # This minimizes token usage alot, but the list of psets is very tailored (specific) to the sampeled IFC models!
  # If there is no prior knowledge of exact pset key names (or relevancy for inference), set to false
  use_pset_filter: true

  # Path to the pset key file if use_pset_filter: true (can add and remove keys!)
  pset_key_file: "config/step_01_data_extraction/pset_selection.py"

  # Choose either "custom" or "preset". Custom allows for user-based configuration of what should be included.
  mode: "preset"

  # Choose data Level of Information (LOI) preset. Used only if mode is "preset"; must be one of: low_LOI, medium_LOI, high_LOI
  preset: "medium_LOI"

  # Used only if mode is "custom"; this is the folder that contains both customizable YAML files
  custom_path: "config/step_01_data_extraction/filter_custom"

  # Used to remove "empty" or "unknown" key-value pairs (minimizes tokens). Set to "false" to maintain.
  remove_empty_values: true

  # Reordering of keys. Maintain the name and the indent, only change order!
  # LLMs can be sensitive to the order of data. Especially data in the "middle" tends to get lost, according to some academic literature.
  # The presets below are a good basis (i.e., you can also just leave as-is)

  # Key order for the "IfcBuildingElement" data sheets
  element_key_order:
    - Element Metadata
    - Element Material Data
    - Element Geometry Data
    - Element Property Sets
    - Element Relationships
    - Element Location
    - CompilationGroupID

  # Key order for the dissected layer sheets of multi-layer elements
  target_layer_key_order:
    - Target Layer of Material Inference
    - Building Element Context
    - CompilationGroupID

  # Key order for the dissected layer sheets of multi-layer elements
  building_element_context_key_order:
    - Element Metadata
    - Other Material Layers
    - Layer Set Metadata
    - Element Geometry Data
    - Element Property Sets
    - Element Relationships
    - Element Location









